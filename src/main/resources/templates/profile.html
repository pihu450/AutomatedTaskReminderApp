<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>My Profile | Task Reminder</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>

<body>

<!-- NAVBAR -->
<div th:replace="~{fragments/layout :: navbar}"></div>

<div class="container mt-5">

    <div class="row justify-content-center">
        <div class="col-md-6">

            <div class="card shadow-sm">
                <div class="card-body">
                    <h3 class="text-center mb-4">üë§ My Profile</h3>

                    <!-- SUCCESS MESSAGE -->
                    <div th:if="${successMessage}"
                         class="alert alert-success text-center"
                         th:text="${successMessage}">
                    </div>

                    <!-- PROFILE IMAGE -->
                    <div style="text-align:center; margin-bottom:20px;">
                        <!-- When user has uploaded image -->
                        <!-- Uploaded image -->
                        <img th:if="${user.profileImage != null}"
                             th:src="@{'/uploads/' + ${user.profileImage}}"
                             alt="Profile Picture"
                             style="width:120px;height:120px;border-radius:50%;object-fit:cover;">

                        <!-- Default image (ONLY if no upload ever happened) -->
                        <img th:if="${user.profileImage == null}"
                             src="/uploads/default-user.png"
                             alt="Default Image"
                             style="width:120px;height:120px;border-radius:50%;object-fit:cover;">

                    </div>

                    <!-- PROFILE DETAILS -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">Name</label>
                        <p class="form-control-plaintext"
                           th:text="${user.name}">User Name</p>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Email</label>
                        <p class="form-control-plaintext"
                           th:text="${user.email}">user@email.com</p>
                    </div>

                    <!-- ACTION BUTTONS -->
                    <div class="text-center mt-4">
                        <a th:href="@{/profile/edit}"
                           class="btn btn-primary me-2">
                            ‚úèÔ∏è Edit Profile
                        </a>

                        <a th:href="@{/dashboard}"
                           class="btn btn-secondary">
                            ‚¨Ö Back to Dashboard
                        </a>
                    </div>

                </div>
            </div>

        </div>
    </div>

</div>

<!-- FOOTER -->
<div th:replace="~{fragments/layout :: footer}"></div>

</body>
</html>
