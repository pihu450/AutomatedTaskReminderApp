<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- ================= NAVBAR FRAGMENT ================= -->
<div th:fragment="navbar">
    <nav class="navbar navbar-expand-lg sky-navbar">
        <div class="container-fluid">

            <!-- Brand -->
            <a class="navbar-brand fw-bold" href="/dashboard">
                Task Reminder
            </a>

            <!-- Toggle button (ONLY for mobile) -->
            <button class="navbar-toggler" type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#mainNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Collapsible content -->
            <div class="collapse navbar-collapse justify-content-end" id="mainNavbar">

                <ul class="navbar-nav align-items-lg-center gap-lg-2">

                    <li class="nav-item text-white fw-semibold">
                        Welcome,
                        <b>Chaitanya</b>
                    </li>

                    <li class="nav-item">
                        <span id="liveClock" class="text-white">01:07:40</span>
                    </li>

                    <li class="nav-item">
                        <a class="btn btn-outline-light btn-sm" href="#">Profile</a>
                    </li>

                    <li class="nav-item">
                        <a class="btn btn-outline-light btn-sm" href="#">Dashboard</a>
                    </li>

                    <li class="nav-item">
                        <button class="btn btn-sky btn-sm">üåô</button>
                    </li>

                    <li class="nav-item">
                        <a class="btn btn-danger btn-sm" href="#">Logout</a>
                    </li>

                </ul>
            </div>
        </div>
    </nav>

    <!-- ‚úÖ CLOCK SCRIPT MUST BE INSIDE FRAGMENT -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            function updateClock() {
                const clock = document.getElementById("liveClock");
                if (!clock) return;

                const now = new Date();
                let h = now.getHours();
                let m = now.getMinutes();
                let s = now.getSeconds();

                h = h < 10 ? "0" + h : h;
                m = m < 10 ? "0" + m : m;
                s = s < 10 ? "0" + s : s;

                clock.innerText = h + ":" + m + ":" + s;
            }

            updateClock();
            setInterval(updateClock, 1000);
        });



    </script>
    <script>
        (function () {
    const body = document.body;
    const toggleBtn = document.getElementById("themeToggle");

    if (!toggleBtn) return; // ‚úÖ SAFE GUARD

    const savedTheme = localStorage.getItem("theme");
    const systemPrefersDark =
        window.matchMedia("(prefers-color-scheme: dark)").matches;

    if (savedTheme === "dark" || (!savedTheme && systemPrefersDark)) {
        body.classList.add("dark-mode");
        toggleBtn.textContent = "‚òÄÔ∏è";
    } else {
        toggleBtn.textContent = "üåô";
    }

    toggleBtn.addEventListener("click", () => {
        body.classList.toggle("dark-mode");

        const isDark = body.classList.contains("dark-mode");
        localStorage.setItem("theme", isDark ? "dark" : "light");

        toggleBtn.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
    });

    window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", e => {
            if (!localStorage.getItem("theme")) {
                body.classList.toggle("dark-mode", e.matches);
                toggleBtn.textContent = e.matches ? "‚òÄÔ∏è" : "üåô";
            }
        });
})();

    </script>

</div>

<!-- ================= FOOTER FRAGMENT ================= -->
<div th:fragment="footer">
    <footer class="bg-dark text-white text-center py-3 mt-5">
        <p class="mb-0">
            ¬© 2025 Task Reminder Application |
        </p>
    </footer>
</div>

</html>
